# Admin Order Form V2 - Complete Guide
# Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ ÙØ±Ù… Ø³ÙØ§Ø±Ø´ Ø§Ø¯Ù…ÛŒÙ† Ù†Ø³Ø®Ù‡ Û²

## Ù…Ù‚Ø¯Ù…Ù‡ / Introduction

Admin Order Form V2 is a modern, matrix-based pricing form designed specifically for administrators to create orders on behalf of customers. It integrates seamlessly with the V2 pricing engine and provides a streamlined workflow for order creation.

ÙØ±Ù… Ø³ÙØ§Ø±Ø´ Ø§Ø¯Ù…ÛŒÙ† Ù†Ø³Ø®Ù‡ Û² ÛŒÚ© ÙØ±Ù… Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…Ø§ØªØ±ÛŒØ³ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡â€ŒØ·ÙˆØ± Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ ØªØ§ Ø¨ØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ù†Ø§Ù… Ù…Ø´ØªØ±ÛŒØ§Ù† Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ú©Ù†Ù†Ø¯. Ø§ÛŒÙ† ÙØ±Ù… Ø¨Ù‡â€ŒØ·ÙˆØ± ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ø¨Ø§ Ù…ÙˆØªÙˆØ± Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ V2 Ø§Ø¯ØºØ§Ù… Ø´Ø¯Ù‡ Ùˆ ÛŒÚ© Ú¯Ø±Ø¯Ø´ Ú©Ø§Ø± Ø³Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÛŒØ¬Ø§Ø¯ Ø³ÙØ§Ø±Ø´ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

---

## Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§ / Prerequisites

### Û±. ÙØ¹Ø§Ù„Ø³Ø§Ø²ÛŒ Ù…ÙˆØªÙˆØ± Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ V2

Before using this form, you **must** enable the V2 pricing engine:

1. Go to WordPress Admin â†’ **Tabesh** â†’ **Product Pricing**
2. Enable **"Activate Pricing Engine V2"** checkbox
3. Save settings
4. Configure pricing matrices for at least one book size

Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† ÙØ±Ù…ØŒ **Ø¨Ø§ÛŒØ¯** Ù…ÙˆØªÙˆØ± Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ V2 Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯:

1. Ø¨Ù‡ Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ±Ø¯Ù¾Ø±Ø³ â†’ **ØªØ§Ø¨Ø´** â†’ **Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØµÙˆÙ„** Ø¨Ø±ÙˆÛŒØ¯
2. Ú¯Ø²ÛŒÙ†Ù‡ **"ÙØ¹Ø§Ù„Ø³Ø§Ø²ÛŒ Ù…ÙˆØªÙˆØ± Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù†Ø³Ø®Ù‡ Û²"** Ø±Ø§ Ø¹Ù„Ø§Ù…Øª Ø¨Ø²Ù†ÛŒØ¯
3. ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø±Ø§ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯
4. Ù…Ø§ØªØ±ÛŒØ³ Ù‚ÛŒÙ…Øª Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù‚Ø·Ø¹ Ú©ØªØ§Ø¨ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ú©Ù†ÛŒØ¯

### Û². Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ù…Ø§ØªØ±ÛŒØ³ Ù‚ÛŒÙ…Øª

At least one book size must be configured in the pricing matrix:

1. Go to **Product Pricing** page
2. Select a book size (e.g., A5, Ø±Ù‚Ø¹ÛŒ, ÙˆØ²ÛŒØ±ÛŒ)
3. Configure:
   - Paper types and weights
   - Binding types
   - Cover weights
   - Extra services
   - Cross-restrictions (forbidden combinations)
4. Save the matrix

Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù‚Ø·Ø¹ Ú©ØªØ§Ø¨ Ø¨Ø§ÛŒØ¯ Ø¯Ø± Ù…Ø§ØªØ±ÛŒØ³ Ù‚ÛŒÙ…Øª Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯:

1. Ø¨Ù‡ ØµÙØ­Ù‡ **Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù…Ø­ØµÙˆÙ„** Ø¨Ø±ÙˆÛŒØ¯
2. ÛŒÚ© Ù‚Ø·Ø¹ Ú©ØªØ§Ø¨ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ù„Ø§Ù‹ A5ØŒ Ø±Ù‚Ø¹ÛŒØŒ ÙˆØ²ÛŒØ±ÛŒ)
3. Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ú©Ù†ÛŒØ¯:
   - Ù†ÙˆØ¹ Ú©Ø§ØºØ°Ù‡Ø§ Ùˆ Ú¯Ø±Ù…Ø§Ú˜Ù‡Ø§
   - Ù†ÙˆØ¹ ØµØ­Ø§ÙÛŒâ€ŒÙ‡Ø§
   - Ú¯Ø±Ù…Ø§Ú˜ Ø¬Ù„Ø¯Ù‡Ø§
   - Ø®Ø¯Ù…Ø§Øª Ø§Ø¶Ø§ÙÛŒ
   - Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù…ØªÙ‚Ø§Ø·Ø¹ (ØªØ±Ú©ÛŒØ¨Ø§Øª Ù…Ù…Ù†ÙˆØ¹)
4. Ù…Ø§ØªØ±ÛŒØ³ Ø±Ø§ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯

### Û³. Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ

The form requires administrator-level access:

- Users with **manage_woocommerce** capability (administrators)
- Users in allowed roles (configurable in settings)
- Specific users in allowed users list (configurable in settings)

Ø§ÛŒÙ† ÙØ±Ù… Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø³Ø·Ø­ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ø¯Ø§Ø±Ø¯:

- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª **manage_woocommerce** (Ù…Ø¯ÛŒØ±Ø§Ù†)
- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¯Ø± Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø² (Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª)
- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø®Ø§Øµ Ø¯Ø± Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…Ø¬Ø§Ø² (Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø¯Ø± ØªÙ†Ø¸ÛŒÙ…Ø§Øª)

---

## Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Shortcode / Using the Shortcode

### Ø±ÙˆØ´ Ø³Ø§Ø¯Ù‡ / Simple Method

Add this shortcode to any page or post:

```
[tabesh_admin_order_form]
```

Ø§ÛŒÙ† Ø´ÙˆØ±ØªÚ©Ø¯ Ø±Ø§ Ø¨Ù‡ Ù‡Ø± ØµÙØ­Ù‡ ÛŒØ§ Ù¾Ø³ØªÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯:

```
[tabesh_admin_order_form]
```

### Ø¨Ø§ Ø¹Ù†ÙˆØ§Ù† Ø³ÙØ§Ø±Ø´ÛŒ / With Custom Title

```
[tabesh_admin_order_form_v2 title="Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯"]
```

### Ø¯Ø± Ù‚Ø§Ù„Ø¨ / In Theme Template

```php
<?php echo do_shortcode('[tabesh_admin_order_form]'); ?>
```

---

## Ù…Ø±Ø§Ø­Ù„ ÙØ±Ù… / Form Steps

### Ù…Ø±Ø­Ù„Ù‡ Û±: Ø§Ù†ØªØ®Ø§Ø¨ Ù…Ø´ØªØ±ÛŒ / Step 1: Customer Selection

The first step allows you to either search for an existing customer or create a new one.

Ø§ÙˆÙ„ÛŒÙ† Ù…Ø±Ø­Ù„Ù‡ Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ ÛŒÚ© Ù…Ø´ØªØ±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ø±Ø§ Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒØ¯ ÛŒØ§ ÛŒÚ© Ù…Ø´ØªØ±ÛŒ Ø¬Ø¯ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ÛŒØ¯.

#### Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø´ØªØ±ÛŒ Ù…ÙˆØ¬ÙˆØ¯ / Search Existing Customer

1. Type customer name, mobile, or email in the search box
2. Wait for live search results (minimum 2 characters)
3. Click on a customer to select
4. Selected customer will be displayed with their information

**Features:**
- Live search with AJAX
- Search by name, mobile, or email
- Shows customer details instantly

#### Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø´ØªØ±ÛŒ Ø¬Ø¯ÛŒØ¯ / Create New Customer

1. Switch to "New Customer" tab
2. Fill in:
   - Full name (required)
   - Mobile number (required, format: 09123456789)
   - Email (optional)
3. Click "Create Customer" button
4. New customer will be created and automatically selected

**Features:**
- Real-time mobile validation
- Automatically creates WordPress user
- Seamless transition to order form

### Ù…Ø±Ø­Ù„Ù‡ Û²: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ Ú©ØªØ§Ø¨ / Step 2: Book Information

Enter book title and select book size.

Ø¹Ù†ÙˆØ§Ù† Ú©ØªØ§Ø¨ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ Ùˆ Ù‚Ø·Ø¹ Ú©ØªØ§Ø¨ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.

**Fields:**
- **Book Title**: The name that will be printed on the book
- **Book Size**: Select from configured sizes (A5, Ø±Ù‚Ø¹ÛŒ, ÙˆØ²ÛŒØ±ÛŒ, etc.)

**ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§:**
- Ø¹Ù†ÙˆØ§Ù† Ú©ØªØ§Ø¨: Ù†Ø§Ù…ÛŒ Ú©Ù‡ Ø±ÙˆÛŒ Ø¬Ù„Ø¯ Ú†Ø§Ù¾ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ù‚Ø·Ø¹ Ú©ØªØ§Ø¨: Ø§Ø² Ù‚Ø·Ø¹â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø´Ø¯Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯

### Ù…Ø±Ø­Ù„Ù‡ Û³: Ù…Ø´Ø®ØµØ§Øª Ú©Ø§ØºØ° Ùˆ Ú†Ø§Ù¾ / Step 3: Paper & Print Specifications

Configure paper type, weight, print type, page count, and quantity.

Ù†ÙˆØ¹ Ú©Ø§ØºØ°ØŒ Ú¯Ø±Ù…Ø§Ú˜ØŒ Ù†ÙˆØ¹ Ú†Ø§Ù¾ØŒ ØªØ¹Ø¯Ø§Ø¯ ØµÙØ­Ø§Øª Ùˆ ØªÛŒØ±Ø§Ú˜ Ø±Ø§ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯.

**Cascading Fields (ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¢Ø¨Ø´Ø§Ø±ÛŒ):**

1. **Paper Type**: Select from allowed paper types for chosen book size
2. **Paper Weight**: Automatically filtered based on selected paper type
3. **Print Type**: Dynamically shown based on paper type and weight restrictions
4. **Page Count**: Number of pages (must be multiple of 4)
5. **Quantity**: Print run quantity (respects min/max constraints)

**Smart Filtering:**
- Only allowed combinations are shown
- Forbidden options are automatically hidden
- Real-time constraint validation

### Ù…Ø±Ø­Ù„Ù‡ Û´: ØµØ­Ø§ÙÛŒ Ùˆ Ø¬Ù„Ø¯ / Step 4: Binding & Cover

Select binding type, cover weight, and optional extra services.

Ù†ÙˆØ¹ ØµØ­Ø§ÙÛŒØŒ Ú¯Ø±Ù…Ø§Ú˜ Ø¬Ù„Ø¯ Ùˆ Ø®Ø¯Ù…Ø§Øª Ø§Ø¶Ø§ÙÛŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.

**Fields:**
- **Binding Type**: Choose from configured binding methods
- **Cover Weight**: Filtered based on binding type
- **Extra Services**: Check optional services (lamination, embossing, etc.)

**ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§:**
- Ú¯Ø±Ù…Ø§Ú˜ Ø¬Ù„Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÙˆØ¹ ØµØ­Ø§ÙÛŒ ÙÛŒÙ„ØªØ± Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ø®Ø¯Ù…Ø§Øª Ø§Ø¶Ø§ÙÛŒ Ø¨Ù‡â€ŒØµÙˆØ±Øª Ú†Ú©â€ŒØ¨Ø§Ú©Ø³
- Ù‡Ù…Ù‡ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø§Ø² Ù…Ø§ØªØ±ÛŒØ³ Ù‚ÛŒÙ…Øª Ù…ÛŒâ€ŒØ¢ÛŒÙ†Ø¯

### Ù…Ø±Ø­Ù„Ù‡ Ûµ: Ø¨Ø±Ø±Ø³ÛŒ Ùˆ ØªÚ©Ù…ÛŒÙ„ / Step 5: Review & Submit

Review order details, calculate price, add notes, and submit order.

Ø¬Ø²Ø¦ÛŒØ§Øª Ø³ÙØ§Ø±Ø´ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯ØŒ Ù‚ÛŒÙ…Øª Ø±Ø§ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©Ù†ÛŒØ¯ØŒ ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯ Ùˆ Ø³ÙØ§Ø±Ø´ Ø±Ø§ Ø«Ø¨Øª Ú©Ù†ÛŒØ¯.

**Review Section:**
- Customer information
- Book specifications
- All selected options
- Complete order summary

**Price Calculation:**
1. Click "Calculate Price" button
2. V2 pricing engine calculates:
   - Price per unit
   - Total price
3. Prices displayed in Tomans

**Additional Options:**
- **Notes**: Add order-specific notes or instructions
- **Send SMS**: Check to send confirmation SMS to customer
  - Only sends if checkbox is checked
  - Uses configured SMS provider
  - Sends after successful order creation

**Submit:**
- Click "Submit Order" to finalize
- Order is created in WooCommerce
- Customer receives order confirmation
- Admin is redirected to order details

---

## ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ / Advanced Features

### 1. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ / Real-time Price Calculation

- Uses V2 pricing engine API
- Calculates based on current pricing matrix
- Shows per-unit and total price
- Instant calculation with AJAX

### 2. Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ / Constraint Management

- Forbidden combinations are automatically hidden
- Cascading filters ensure only valid options are shown
- Respects all pricing matrix restrictions
- Prevents invalid parameter combinations

### 3. Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† / User Management

- Search existing WordPress users
- Create new users on-the-fly
- Validate mobile format (Iranian format)
- Seamless user selection

### 4. Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú© Ø§Ø®ØªÛŒØ§Ø±ÛŒ / Optional SMS Sending

- Checkbox to enable/disable SMS
- Sends only if explicitly checked
- Uses configured SMS provider
- Respects SMS settings and balance

### 5. Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù…Ø¯Ø±Ù† / Modern UI

- 5-step wizard interface
- Progress bar showing current step
- Visual step indicators
- Smooth transitions
- Responsive design
- RTL support for Persian
- Toast notifications for feedback
- Loading states for async operations

---

## API Integration

The form integrates with the following REST API endpoints:

### 1. Customer Management
- **POST** `/tabesh/v1/admin/search-users-live` - Live search customers
- **POST** `/tabesh/v1/admin/create-user` - Create new customer

### 2. Price Calculation
- **POST** `/tabesh/v1/calculate-price` - Calculate order price
  ```json
  {
    "book_size": "A5",
    "paper_type": "ØªØ­Ø±ÛŒØ±",
    "paper_weight": "80",
    "print_type": "bw",
    "page_count": 100,
    "quantity": 50,
    "binding_type": "Ø´ÙˆÙ…ÛŒØ²",
    "cover_weight": "300",
    "extras": ["Ø³Ù„ÙÙˆÙ†"]
  }
  ```

### 3. Constraint Management
- **POST** `/tabesh/v1/get-allowed-options` - Get filtered options
  ```json
  {
    "book_size": "A5",
    "current_selection": {
      "paper_type": "ØªØ­Ø±ÛŒØ±",
      "paper_weight": "80"
    }
  }
  ```

### 4. Order Submission
- **POST** `/tabesh/v1/submit-order` - Submit order
  ```json
  {
    "customer_id": 123,
    "book_title": "Ú©ØªØ§Ø¨ Ù†Ù…ÙˆÙ†Ù‡",
    "book_size": "A5",
    "paper_type": "ØªØ­Ø±ÛŒØ±",
    "paper_weight": "80",
    "print_type": "bw",
    "page_count": 100,
    "quantity": 50,
    "binding_type": "Ø´ÙˆÙ…ÛŒØ²",
    "cover_weight": "300",
    "extras": ["Ø³Ù„ÙÙˆÙ†"],
    "notes": "ØªÙˆØ¶ÛŒØ­Ø§Øª Ø§Ø¶Ø§ÙÛŒ",
    "send_sms": true,
    "calculated_price": { ... }
  }
  ```

---

## ØªÙØ§ÙˆØª Ø¨Ø§ Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ / Differences from Previous Versions

| Feature | Admin Order Form (Legacy) | Admin Order Form V2 |
|---------|---------------------------|---------------------|
| **Pricing Engine** | Legacy coefficients | V2 matrix-based |
| **Option Filtering** | Static - shows all options | Dynamic - shows only allowed |
| **Constraint Validation** | At submission | Real-time cascading |
| **UI/UX** | Compact horizontal layout | Modern 5-step wizard |
| **Customer Management** | Search only | Search + create |
| **Price Calculation** | Legacy algorithm | V2 API-based |
| **Mobile Format** | Basic validation | Iranian format (09xxxxxxxxx) |
| **SMS Control** | Always sent if enabled | Optional per-order |

---

## Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ / Troubleshooting

### ÙØ±Ù… Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
**Form doesn't display**

**Problem:** "No book sizes configured" error
**Solution:**
1. Enable V2 pricing engine in Product Pricing page
2. Configure at least one book size pricing matrix
3. Ensure product parameters (book sizes) are defined in settings

### Ø®Ø·Ø§ Ø¯Ø± Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø´ØªØ±ÛŒ
**Customer search error**

**Problem:** Search returns no results or error
**Solution:**
1. Check WordPress user roles and permissions
2. Verify REST API is accessible
3. Check browser console for AJAX errors
4. Ensure nonce is valid

### Ù‚ÛŒÙ…Øª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
**Price not calculating**

**Problem:** "Error calculating price" message
**Solution:**
1. Verify all required fields are filled
2. Check pricing matrix is configured for selected book size
3. Ensure all parameters have valid pricing entries
4. Check browser console for API errors

### Ø³ÙØ§Ø±Ø´ Ø«Ø¨Øª Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯
**Order not submitting**

**Problem:** "Error submitting order" message
**Solution:**
1. Verify WooCommerce is active
2. Check user has sufficient permissions
3. Ensure all required fields are filled
4. Verify pricing was calculated before submission
5. Check WordPress debug log for errors

---

## Ø¯Ø³ØªØ±Ø³ÛŒ Ùˆ Ø§Ù…Ù†ÛŒØª / Access & Security

### Access Control

The form is protected by multiple access layers:

1. **WordPress Login**: Must be logged in
2. **Role-Based Access**:
   - Administrators (manage_woocommerce capability)
   - Custom allowed roles (configured in settings)
   - Specific allowed users (configured in settings)

### Security Features

- âœ… Nonce verification for all AJAX requests
- âœ… Input sanitization and validation
- âœ… SQL injection prevention
- âœ… XSS protection
- âœ… Role-based access control
- âœ… REST API authentication

### Configuring Access

To allow non-administrator users:

1. Go to **Tabesh** â†’ **Settings**
2. Find **Admin Order Form Access** section
3. Configure:
   - **Allowed Roles**: Select WordPress roles
   - **Allowed Users**: Add specific user IDs
4. Save settings

---

## Ø¨Ù‡ØªØ±ÛŒÙ† Ø´ÛŒÙˆÙ‡â€ŒÙ‡Ø§ / Best Practices

### 1. Ù‚Ø¨Ù„ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡
- Always test in a staging environment first
- Configure pricing matrices thoroughly
- Test all book size configurations
- Verify SMS provider settings if using SMS

### 2. Ù‡Ù†Ú¯Ø§Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡
- Always calculate price before submission
- Verify customer information is correct
- Add notes for special instructions
- Use SMS option selectively to manage costs

### 3. Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø³ØªÙØ§Ø¯Ù‡
- Monitor order creation in WooCommerce
- Check SMS delivery status
- Review order details for accuracy
- Follow up with customers as needed

---

## Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„ / FAQ

### Q: Can I use this form without V2 pricing engine?
**A:** No, this form requires V2 pricing engine to be enabled. Use `[tabesh_admin_order_form]` for legacy pricing.

### Q: How do I add more book sizes?
**A:** Go to Tabesh â†’ Settings â†’ Product Parameters, add book sizes, then configure pricing matrices for each.

### Q: Can customers use this form?
**A:** No, this form is admin-only. Customers should use `[tabesh_order_form_v2]` shortcode.

### Q: Does SMS always send?
**A:** No, SMS only sends if the checkbox is checked on step 5. This gives you per-order control.

### Q: How is price calculated?
**A:** Price is calculated using V2 pricing engine API, which uses the configured pricing matrix for the selected book size.

### Q: Can I create multiple orders simultaneously?
**A:** Yes, after submitting an order, you can click "Create Another Order" to start fresh.

---

## Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ / Support

For questions or issues:

- ğŸ“– **Documentation**: Check this guide and related docs
- ğŸ› **Bug Reports**: [GitHub Issues](https://github.com/tabshhh4-sketch/Tabesh/issues)
- ğŸ’¬ **Community**: [GitHub Discussions](https://github.com/tabshhh4-sketch/Tabesh/discussions)
- ğŸ“§ **Email**: support@chapco.ir

---

## Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· / Related Links

- [PRICING_ENGINE_V2.md](PRICING_ENGINE_V2.md) - V2 Pricing Engine Documentation
- [ORDER_FORM_V2_GUIDE.md](ORDER_FORM_V2_GUIDE.md) - Customer Order Form V2 Guide
- [DEPENDENCY_ENGINE_V2_GUIDE.md](DEPENDENCY_ENGINE_V2_GUIDE.md) - Constraint Manager Guide
- [README.md](README.md) - Main Plugin Documentation

---

Made with â¤ï¸ for the Persian printing industry
